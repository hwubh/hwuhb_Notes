- 1: ClearRenderTarget => depth / stencil, meaning the default value of depth/stencil textures after being clearing. 
- 2: 想使用SRP Batcher compatibility特性，在HLSL代码中我们必须把每个Properties里的变量放到 CBUFFER 中
- 3: Unity底层会将CBuffer统一放置与动态Uniform缓冲区中，但CBuffer的描述数量或者CBuffers占据的空间超过硬件限制后会造成异常（Shader报错）。可以考虑将一些绘制过程中不会发生变化的Cbuffer放置于静态Uniform中。
- 4: Static batching, combine to a huge VBO, submit the IBO of objects to be drawn.
    Dynamic Batching, combine several objects as an object, submit its VBO and IBO. Need to convert PositionOS(A) to PositionOS(B).
    GPU Instancing, submit a mesh, transform it according to PIA(Per Instanced Attribute).
- 5:  Cbuffer中的变量需要全部用到，不然可能导致使用SRP batcher的物件在OPENGL下无法渲染
- 6: Graphic 接口的指令，如DrawMesh等，在URP中，会等到DrawObjectPass时统一提交，优先级或许高于CommandBuffer的指令。同样，Graphic 接口的SetXX 的函数，优先级也较高。但调用Graphic 需保证一帧内所引用的资源不更改，不与CommandBuffer接口引用的不冲突，不然可能造成问题。
- 7：在Pass的Execute阶段最好不要使用Graphic 与GameObject提供的接口，可能会与CommandBuffer的命令产生时序问题。
- 8：URP pass，先统一调用一次Init， 在调用所有的Setup，最后是所有Execute阶段，Execute是实质的运行阶段（绘制）阶段。
- 9：URP 中，unity内存的cbuffer就占据了7个动态的标识符（非Instancing 的少一个），对于一些maxDescriptorSetUniformBuffersDynamic 为 8 芯片（如Andreno 512以下）的机型，Shader只可以自己定义1~2Cbuffer, 否则（不改动源码的情况下）该shader会被直接抛弃。
- 10：The light map UV are provided via the second texture coordinates channel so we need to use the TEXCOORD1 semantic in Attributes.
- 11：URP14中cmd.blit 在msaa未开启的情况下获取的maintex为黑；若使用Blitter.BlitCameraTexture需要将maintex改成blitTexture，且必须包含“Runtime/Utilities/Blit.hlsl”，且需要重映射一下顶点和uv。![20240611005239](https://raw.githubusercontent.com/hwubh/hwubh_Pictures/main/20240611005239.png)
- 12：URP的PBR渲染方程：https://blog.csdn.net/linjf520/article/details/122464903
  - D：GGX： 描述微表面法线N和半角H同向性的比重，粗糙度越高，物体表面越粗糙，N，H同向性越低（反射越不清晰）：![20240614092732](https://raw.githubusercontent.com/hwubh/hwubh_Pictures/main/20240614092732.png)
  - G：k:NdotL的过去系数：k = pow(1+roughness,2)*0.5, 粗糙度越高，G值越小![20240614092948](https://raw.githubusercontent.com/hwubh/hwubh_Pictures/main/20240614092948.png)
  - F：光线不同角度入射会有不同反射率：非金属的反射率多在：0.02~0.04；金属的反射率多在：0.7~1.0；金属度越高，F值越大（Lerp = （0.04，albedo，metallic））![20240614094220](https://raw.githubusercontent.com/hwubh/hwubh_Pictures/main/20240614094220.png)
- 13：工作流：https://blog.csdn.net/u010281174/article/details/108964117
  - 金属度/粗糙度（M/R）工作流：使用三张贴图来表示PBR的参数
    - BaseColor：非导体的albedo与金属的$F_0$；非金属具有非彩色的镜面反射颜色，而金属具有彩色的镜面反射颜色，即非金属的F0是一个float,金属的F0是一个float3
    - metallic: 灰度贴图，类似遮罩，表示金属的占比
    - roughness：灰度贴图，数值越大越粗糙
    - 优劣：非金属的F0固定为0.04，无法调整；主流工作流
  - 镜面反射/光泽度（S/G）工作流：
    - Diffuse：Albedo，RGB图，表示非金属的albedo（若为金属，则该值为0）；对于非金属部分，它储存的是漫反射颜色
    - Specular：RGB，定义金属与非金属的$F_0$
    - Glossiness: 灰度图，数值越大越光滑
    - 优劣：可以灵活调整金属，非金属的$F_0$，也容易制作出违反物理定律的贴图；使用了两张RGB图。
- 14: Shadow pancaking: unity 会调整（前提）光源相机的近平面来优化阴影质量，但这也可能造成错误的阴影显示。